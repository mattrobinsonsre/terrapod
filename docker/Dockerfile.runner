# Minimal runner image for Terrapod K8s Jobs.
#
# No terraform/tofu binary baked in â€” downloaded at runtime from binary cache.
# Includes signal-forwarding entrypoint for graceful spot instance termination.

FROM alpine:3.21

RUN apk add --no-cache \
    curl \
    tar \
    jq \
    unzip

COPY runner-entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

USER 1000:1000
WORKDIR /workspace

ENTRYPOINT ["/entrypoint.sh"]
